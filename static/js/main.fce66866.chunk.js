(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{222:function(t,e,i){},233:function(t,e){},235:function(t,e){},245:function(t,e){},247:function(t,e){},274:function(t,e){},275:function(t,e){},280:function(t,e){},282:function(t,e){},289:function(t,e){},308:function(t,e){},326:function(t,e,i){},327:function(t,e,i){},352:function(t,e,i){},353:function(t,e,i){},354:function(t,e,i){},355:function(t,e,i){"use strict";i.r(e);i(222);var a,s=i(19),r=i.n(s),n=i(27),c=i(9),o=i(25),h=i(0),l=i.n(h),u=i(2),m=function t(){Object(o.a)(this,t),this.limits=[-4,-4,4,4],this.focusedArc=0,this.selectedArc=0,this.drawList=[]},x=function(t,e){var i=t,a=e;switch(console.log("DEBUG: signal "+JSON.stringify(e)),e.signalName){case"Ready":break;case"ArcFocus":console.debug("focus arc: ".concat(a.arc)),i.focusedArc=a.arc}return window._glamState=i,i},p=l.a.createContext(null),d=function(t){var e=Object(h.useReducer)(x,new m),i=Object(c.a)(e,2),a=i[0],s=i[1];return Object(u.jsx)(p.Provider,{value:[a,s],children:t.children})},f=i(21);!function(t){t[t.C=0]="C",t[t.R2C=1]="R2C",t[t.C2C=2]="C2C"}(a||(a={}));var v=function t(e,i){Object(o.a)(this,t),this.name=void 0,this.id=void 0,this.parameterName="",this.style={stroke:"white"},this.type=a.C,this.text="",this.stack=[],this.functionName="",this.jitFunction=void 0,this.drawing=!1,this.id=e,this.name=i},b=l.a.createContext(void 0),g=function(t){var e=Object(h.useReducer)((function(t,e){var i=Object(f.a)({},t);return i[e.pfId]=Object(f.a)(Object(f.a)({},t[e.pfId]?t[e.pfId]:new v(e.pfId,"New Function")),e.change),i}),{}),i=Object(c.a)(e,2),a=i[0],s=i[1];return Object(u.jsx)(b.Provider,{value:[a,s],children:t.children})};function j(t,e){var i=Object(h.useContext)(b);if(!i)throw"Protofunction context not provided!";var a=Object(c.a)(i,2),s=a[0],r=a[1];return s[t]||(r({pfId:t,change:{type:e}}),s[t]=new v(t,"New Function")),[s[t],function(e){return r({pfId:t,change:e})}]}var y,O=i(161),_=i.n(O),k=i(46),w=i(26),N=function(){function t(){Object(o.a)(this,t),this.decimalsign="\\.",this.setup_symbols(),this.sort_symbols()}return Object(k.a)(t,[{key:"setup_symbols",value:function(){this.greek_letters=["alpha","beta","gamma","Gamma","delta","Delta","epsilon","varepsilon","zeta","eta","theta","Theta","vartheta","iota","kappa","lambda","Lambda","mu","nu","xi","Xi","pi","Pi","rho","sigma","Sigma","tau","upsilon","phi","Phi","varphi","chi","psi","Psi","omega","Omega"],this.relations=[{asciimath:":=",tex:":="},{asciimath:":|:",tex:"\\|"},{asciimath:"=>",tex:"\\Rightarrow"},{asciimath:"approx",tex:"\\approx"},{asciimath:"~~",tex:"\\approx"},{asciimath:"cong",tex:"\\cong"},{asciimath:"~=",tex:"\\cong"},{asciimath:"equiv",tex:"\\equiv"},{asciimath:"-=",tex:"\\equiv"},{asciimath:"exists",tex:"\\exists"},{asciimath:"EE",tex:"\\exists"},{asciimath:"forall",tex:"\\forall"},{asciimath:"AA",tex:"\\forall"},{asciimath:">=",tex:"\\ge"},{asciimath:"ge",tex:"\\ge"},{asciimath:"gt=",tex:"\\geq"},{asciimath:"geq",tex:"\\geq"},{asciimath:"gt",tex:"\\gt"},{asciimath:"in",tex:"\\in"},{asciimath:"<=",tex:"\\le"},{asciimath:"le",tex:"\\le"},{asciimath:"lt=",tex:"\\leq"},{asciimath:"leq",tex:"\\leq"},{asciimath:"lt",tex:"\\lt"},{asciimath:"models",tex:"\\models"},{asciimath:"|==",tex:"\\models"},{asciimath:"!=",tex:"\\ne"},{asciimath:"ne",tex:"\\ne"},{asciimath:"notin",tex:"\\notin"},{asciimath:"!in",tex:"\\notin"},{asciimath:"prec",tex:"\\prec"},{asciimath:"-lt",tex:"\\prec"},{asciimath:"-<",tex:"\\prec"},{asciimath:"preceq",tex:"\\preceq"},{asciimath:"-<=",tex:"\\preceq"},{asciimath:"propto",tex:"\\propto"},{asciimath:"prop",tex:"\\propto"},{asciimath:"subset",tex:"\\subset"},{asciimath:"sub",tex:"\\subset"},{asciimath:"subseteq",tex:"\\subseteq"},{asciimath:"sube",tex:"\\subseteq"},{asciimath:"succ",tex:"\\succ"},{asciimath:">-",tex:"\\succ"},{asciimath:"succeq",tex:"\\succeq"},{asciimath:">-=",tex:"\\succeq"},{asciimath:"supset",tex:"\\supset"},{asciimath:"sup",tex:"\\supset"},{asciimath:"supseteq",tex:"\\supseteq"},{asciimath:"supe",tex:"\\supseteq"},{asciimath:"vdash",tex:"\\vdash"},{asciimath:"|--",tex:"\\vdash"}],this.constants=[{asciimath:"dt",tex:"dt"},{asciimath:"dx",tex:"dx"},{asciimath:"dy",tex:"dy"},{asciimath:"dz",tex:"dz"},{asciimath:"prime",tex:"'"},{asciimath:"implies",tex:"\\implies"},{asciimath:"epsi",tex:"\\epsilon"},{asciimath:"leftrightarrow",tex:"\\leftrightarrow"},{asciimath:"Leftrightarrow",tex:"\\Leftrightarrow"},{asciimath:"rightarrow",tex:"\\rightarrow"},{asciimath:"Rightarrow",tex:"\\Rightarrow"},{asciimath:"backslash",tex:"\\backslash"},{asciimath:"leftarrow",tex:"\\leftarrow"},{asciimath:"Leftarrow",tex:"\\Leftarrow"},{asciimath:"setminus",tex:"\\setminus"},{asciimath:"bigwedge",tex:"\\bigwedge"},{asciimath:"diamond",tex:"\\diamond"},{asciimath:"bowtie",tex:"\\bowtie"},{asciimath:"bigvee",tex:"\\bigvee"},{asciimath:"bigcap",tex:"\\bigcap"},{asciimath:"bigcup",tex:"\\bigcup"},{asciimath:"square",tex:"\\square"},{asciimath:"lamda",tex:"\\lambda"},{asciimath:"Lamda",tex:"\\Lambda"},{asciimath:"aleph",tex:"\\aleph"},{asciimath:"angle",tex:"\\angle"},{asciimath:"frown",tex:"\\frown"},{asciimath:"qquad",tex:"\\qquad"},{asciimath:"cdots",tex:"\\cdots"},{asciimath:"vdots",tex:"\\vdots"},{asciimath:"ddots",tex:"\\ddots"},{asciimath:"cdot",tex:"\\cdot"},{asciimath:"star",tex:"\\star"},{asciimath:"|><|",tex:"\\bowtie"},{asciimath:"circ",tex:"\\circ"},{asciimath:"oint",tex:"\\oint"},{asciimath:"grad",tex:"\\nabla"},{asciimath:"quad",tex:"\\quad"},{asciimath:"uarr",tex:"\\uparrow"},{asciimath:"darr",tex:"\\downarrow"},{asciimath:"downarrow",tex:"\\downarrow"},{asciimath:"rarr",tex:"\\rightarrow"},{asciimath:">->>",tex:"\\twoheadrightarrowtail"},{asciimath:"larr",tex:"\\leftarrow"},{asciimath:"harr",tex:"\\leftrightarrow"},{asciimath:"rArr",tex:"\\Rightarrow"},{asciimath:"lArr",tex:"\\Leftarrow"},{asciimath:"hArr",tex:"\\Leftrightarrow"},{asciimath:"ast",tex:"\\ast"},{asciimath:"***",tex:"\\star"},{asciimath:"|><",tex:"\\ltimes"},{asciimath:"><|",tex:"\\rtimes"},{asciimath:"^^^",tex:"\\bigwedge"},{asciimath:"vvv",tex:"\\bigvee"},{asciimath:"cap",tex:"\\cap"},{asciimath:"nnn",tex:"\\bigcap"},{asciimath:"cup",tex:"\\cup"},{asciimath:"uuu",tex:"\\bigcup"},{asciimath:"not",tex:"\\neg"},{asciimath:"<=>",tex:"\\Leftrightarrow"},{asciimath:"_|_",tex:"\\bot"},{asciimath:"bot",tex:"\\bot"},{asciimath:"int",tex:"\\int"},{asciimath:"del",tex:"\\partial"},{asciimath:"...",tex:"\\ldots"},{asciimath:"/_\\",tex:"\\triangle"},{asciimath:"|__",tex:"\\lfloor"},{asciimath:"__|",tex:"\\rfloor"},{asciimath:"dim",tex:"\\dim"},{asciimath:"mod",tex:"\\operatorname{mod}"},{asciimath:"lub",tex:"\\operatorname{lub}"},{asciimath:"glb",tex:"\\operatorname{glb}"},{asciimath:">->",tex:"\\rightarrowtail"},{asciimath:"->>",tex:"\\twoheadrightarrow"},{asciimath:"|->",tex:"\\mapsto"},{asciimath:"lim",tex:"\\lim"},{asciimath:"Lim",tex:"\\operatorname{Lim}"},{asciimath:"and",tex:"\\quad\\text{and}\\quad"},{asciimath:"**",tex:"\\ast"},{asciimath:"//",tex:"/"},{asciimath:"\\",tex:"\\,"},{asciimath:"\\\\",tex:"\\backslash"},{asciimath:"xx",tex:"\\times"},{asciimath:"-:",tex:"\\div"},{asciimath:"o+",tex:"\\oplus"},{asciimath:"ox",tex:"\\otimes"},{asciimath:"o.",tex:"\\odot"},{asciimath:"^",tex:"\\hat{}"},{asciimath:"_",tex:"\\_"},{asciimath:"^^",tex:"\\wedge"},{asciimath:"vv",tex:"\\vee"},{asciimath:"nn",tex:"\\cap"},{asciimath:"uu",tex:"\\cup"},{asciimath:"TT",tex:"\\top"},{asciimath:"+-",tex:"\\pm"},{asciimath:"O/",tex:"\\emptyset"},{asciimath:"oo",tex:"\\infty"},{asciimath:":.",tex:"\\therefore"},{asciimath:":'",tex:"\\because"},{asciimath:"/_",tex:"\\angle"},{asciimath:"|~",tex:"\\lceil"},{asciimath:"~|",tex:"\\rceil"},{asciimath:"CC",tex:"\\mathbb{C}"},{asciimath:"NN",tex:"\\mathbb{N}"},{asciimath:"QQ",tex:"\\mathbb{Q}"},{asciimath:"RR",tex:"\\mathbb{R}"},{asciimath:"ZZ",tex:"\\mathbb{Z}"},{asciimath:"->",tex:"\\to"},{asciimath:"or",tex:"\\quad\\text{or}\\quad"},{asciimath:"if",tex:"\\quad\\text{if}\\quad"},{asciimath:"iff",tex:"\\iff"},{asciimath:"*",tex:"\\cdot"},{asciimath:"@",tex:"\\circ"},{asciimath:"%",tex:"\\%"},{asciimath:"boxempty",tex:"\\square"},{asciimath:"lambda",tex:"\\lambda"},{asciimath:"Lambda",tex:"\\Lambda"},{asciimath:"nabla",tex:"\\nabla"},{asciimath:"uparrow",tex:"\\uparrow"},{asciimath:"downarrow",tex:"\\downarrow"},{asciimath:"twoheadrightarrowtail",tex:"\\twoheadrightarrowtail"},{asciimath:"ltimes",tex:"\\ltimes"},{asciimath:"rtimes",tex:"\\rtimes"},{asciimath:"neg",tex:"\\neg"},{asciimath:"partial",tex:"\\partial"},{asciimath:"ldots",tex:"\\ldots"},{asciimath:"triangle",tex:"\\triangle"},{asciimath:"lfloor",tex:"\\lfloor"},{asciimath:"rfloor",tex:"\\rfloor"},{asciimath:"rightarrowtail",tex:"\\rightarrowtail"},{asciimath:"twoheadrightarrow",tex:"\\twoheadrightarrow"},{asciimath:"mapsto",tex:"\\mapsto"},{asciimath:"times",tex:"\\times"},{asciimath:"div",tex:"\\div"},{asciimath:"divide",tex:"\\div"},{asciimath:"oplus",tex:"\\oplus"},{asciimath:"otimes",tex:"\\otimes"},{asciimath:"odot",tex:"\\odot"},{asciimath:"wedge",tex:"\\wedge"},{asciimath:"vee",tex:"\\vee"},{asciimath:"top",tex:"\\top"},{asciimath:"pm",tex:"\\pm"},{asciimath:"emptyset",tex:"\\emptyset"},{asciimath:"infty",tex:"\\infty"},{asciimath:"therefore",tex:"\\therefore"},{asciimath:"because",tex:"\\because"},{asciimath:"lceil",tex:"\\lceil"},{asciimath:"rceil",tex:"\\rceil"},{asciimath:"to",tex:"\\to"},{asciimath:"langle",tex:"\\langle"},{asciimath:"lceiling",tex:"\\lceil"},{asciimath:"rceiling",tex:"\\rceil"},{asciimath:"max",tex:"\\max"},{asciimath:"min",tex:"\\min"},{asciimath:"prod",tex:"\\prod"},{asciimath:"sum",tex:"\\sum"}],this.constants=this.constants.concat(this.relations),this.left_brackets=[{asciimath:"langle",tex:"\\langle"},{asciimath:"(:",tex:"\\langle"},{asciimath:"<<",tex:"\\langle"},{asciimath:"{:",tex:"."},{asciimath:"(",tex:"("},{asciimath:"[",tex:"["},{asciimath:"{",tex:"\\lbrace"},{asciimath:"lbrace",tex:"\\lbrace"}],this.right_brackets=[{asciimath:"rangle",tex:"\\rangle"},{asciimath:":)",tex:"\\rangle"},{asciimath:">>",tex:"\\rangle"},{asciimath:":}",tex:".",free_tex:":\\}"},{asciimath:")",tex:")"},{asciimath:"]",tex:"]"},{asciimath:"}",tex:"\\rbrace"},{asciimath:"rbrace",tex:"\\rbrace"}],this.leftright_brackets=[{asciimath:"|",left_tex:"\\lvert",right_tex:"\\rvert",free_tex:"|"}],this.unary_symbols=[{asciimath:"sqrt",tex:"\\sqrt"},{asciimath:"f",tex:"f",func:!0},{asciimath:"g",tex:"g",func:!0},{asciimath:"sin",tex:"\\sin",func:!0},{asciimath:"cos",tex:"\\cos",func:!0},{asciimath:"tan",tex:"\\tan",func:!0},{asciimath:"arcsin",tex:"\\arcsin",func:!0},{asciimath:"arccos",tex:"\\arccos",func:!0},{asciimath:"arctan",tex:"\\arctan",func:!0},{asciimath:"sinh",tex:"\\sinh",func:!0},{asciimath:"cosh",tex:"\\cosh",func:!0},{asciimath:"tanh",tex:"\\tanh",func:!0},{asciimath:"cot",tex:"\\cot",func:!0},{asciimath:"coth",tex:"\\coth",func:!0},{asciimath:"sech",tex:"\\operatorname{sech}",func:!0},{asciimath:"csch",tex:"\\operatorname{csch}",func:!0},{asciimath:"sec",tex:"\\sec",func:!0},{asciimath:"csc",tex:"\\csc",func:!0},{asciimath:"log",tex:"\\log",func:!0},{asciimath:"ln",tex:"\\ln",func:!0},{asciimath:"abs",rewriteleftright:["|","|"]},{asciimath:"norm",rewriteleftright:["\\|","\\|"]},{asciimath:"floor",rewriteleftright:["\\lfloor","\\rfloor"]},{asciimath:"ceil",rewriteleftright:["\\lceil","\\rceil"]},{asciimath:"Sin",tex:"\\Sin",func:!0},{asciimath:"Cos",tex:"\\Cos",func:!0},{asciimath:"Tan",tex:"\\Tan",func:!0},{asciimath:"Arcsin",tex:"\\Arcsin",func:!0},{asciimath:"Arccos",tex:"\\Arccos",func:!0},{asciimath:"Arctan",tex:"\\Arctan",func:!0},{asciimath:"Sinh",tex:"\\Sinh",func:!0},{asciimath:"Cosh",tex:"\\Cosh",func:!0},{asciimath:"Tanh",tex:"\\Tanh",func:!0},{asciimath:"Cot",tex:"\\Cot",func:!0},{asciimath:"Sec",tex:"\\Sec",func:!0},{asciimath:"Csc",tex:"\\Csc",func:!0},{asciimath:"Log",tex:"\\Log",func:!0},{asciimath:"Ln",tex:"\\Ln",func:!0},{asciimath:"Abs",tex:"\\Abs",rewriteleftright:["|","|"]},{asciimath:"det",tex:"\\det",func:!0},{asciimath:"exp",tex:"\\exp",func:!0},{asciimath:"gcd",tex:"\\gcd",func:!0},{asciimath:"lcm",tex:"\\operatorname{lcm}",func:!0},{asciimath:"cancel",tex:"\\cancel"},{asciimath:"Sqrt",tex:"\\Sqrt"},{asciimath:"hat",tex:"\\hat",acc:!0},{asciimath:"bar",tex:"\\overline",acc:!0},{asciimath:"overline",tex:"\\overline",acc:!0},{asciimath:"vec",tex:"\\vec",acc:!0},{asciimath:"tilde",tex:"\\tilde",acc:!0},{asciimath:"dot",tex:"\\dot",acc:!0},{asciimath:"ddot",tex:"\\ddot",acc:!0},{asciimath:"ul",tex:"\\underline",acc:!0},{asciimath:"underline",tex:"\\underline",acc:!0},{asciimath:"ubrace",tex:"\\underbrace",acc:!0},{asciimath:"underbrace",tex:"\\underbrace",acc:!0},{asciimath:"obrace",tex:"\\overbrace",acc:!0},{asciimath:"overbrace",tex:"\\overbrace",acc:!0},{asciimath:"bb",atname:"mathvariant",atval:"bold",tex:"\\mathbf"},{asciimath:"mathbf",atname:"mathvariant",atval:"bold",tex:"mathbf"},{asciimath:"sf",atname:"mathvariant",atval:"sans-serif",tex:"\\mathsf"},{asciimath:"mathsf",atname:"mathvariant",atval:"sans-serif",tex:"mathsf"},{asciimath:"bbb",atname:"mathvariant",atval:"double-struck",tex:"\\mathbb"},{asciimath:"mathbb",atname:"mathvariant",atval:"double-struck",tex:"\\mathbb"},{asciimath:"cc",atname:"mathvariant",atval:"script",tex:"\\mathcal"},{asciimath:"mathcal",atname:"mathvariant",atval:"script",tex:"\\mathcal"},{asciimath:"tt",atname:"mathvariant",atval:"monospace",tex:"\\mathtt"},{asciimath:"mathtt",atname:"mathvariant",atval:"monospace",tex:"\\mathtt"},{asciimath:"fr",atname:"mathvariant",atval:"fraktur",tex:"\\mathfrak"},{asciimath:"mathfrak",atname:"mathvariant",atval:"fraktur",tex:"\\mathfrak"}],this.binary_symbols=[{asciimath:"root",tex:"\\sqrt",option:!0},{asciimath:"frac",tex:"\\frac"},{asciimath:"stackrel",tex:"\\stackrel"},{asciimath:"overset",tex:"\\overset"},{asciimath:"underset",tex:"\\underset"},{asciimath:"color",tex:"\\color",rawfirst:!0}],this.non_constant_symbols=["_","^","/"]}},{key:"sort_symbols",value:function(){var t=function(t,e){return(t=t.asciimath.length)>(e=e.asciimath.length)?-1:t<e?1:0};this.constants.sort(t),this.relations.sort(t),this.left_brackets.sort(t),this.right_brackets.sort(t),this.leftright_brackets.sort(t),this.unary_symbols.sort(t),this.binary_symbols.sort(t)}},{key:"error",value:function(t,e){var i=this.source(e).slice(0,5);throw new Error("Error at character ".concat(e,' near "').concat(i,'": ').concat(t))}},{key:"literal",value:function(t){if(t)return{tex:t.token,pos:t.pos,end:t.end,ttype:"literal"}}},{key:"longest",value:function(t){return(t=t.filter((function(t){return!!t}))).sort((function(t,e){return(t=t.end)>(e=e.end)?-1:t<e?1:0})),t[0]}},{key:"escape_text",value:function(t){return t.replace(/\{/g,"\\{").replace(/\}/g,"\\}")}},{key:"input",value:function(t){this._source=t,this.brackets=[]}},{key:"source",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return arguments.length>1?this._source.slice(t,e):this._source.slice(t)}},{key:"eof",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t=this.strip_space(t))==this._source.length}},{key:"unbracket",value:function(t){if(t){if(!t.bracket)return t;var e=["(",")","[","]","{","}"],i=e.includes(t.left.asciimath),a=e.includes(t.right.asciimath),s=i?t.left.end:t.pos,r=a?t.right.pos:t.end,n=i?"":t.left.tex,c=a?"":t.right.tex,o=t.middle?t.middle.tex:"";return n||c?(c=c||".",{tex:"\\left ".concat(n=n||"."," ").concat(o," \\right ").concat(c),pos:t.pos,end:t.end}):{tex:o,pos:t.pos,end:t.end,middle_asciimath:this.source(s,r)}}}},{key:"parse",value:function(t){return this.input(t),this.consume().tex}},{key:"consume",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e="",i=[];!this.eof(t);){var a=this.expression_list(t);if(!a){var s=this.right_bracket(t);s&&(s.def.free_tex&&(s.tex=s.def.free_tex),a=s);var r=this.leftright_bracket(t);if(r){a=r;var n=this.subsup(r.end);n&&(a={tex:"".concat(a.tex).concat(n.tex),pos:t,end:n.end,ttype:"expression"})}}if(a)e&&(e+=" "),e+=a.tex,t=a.end,i.push(a);else if(!this.eof(t)){var c=this.source(t,t+1);i.push({tex:c,pos:t,ttype:"character"}),e+=c,t+=1}}return{tex:e,exprs:i}}},{key:"strip_space",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.source(t),i=e.replace(/^(\s|\\(?!\\))*/,"");return t+e.length-i.length}},{key:"match",value:function(t,e){e=this.strip_space(e);var i=t.exec(this.source(e));if(i){var a=i[0];return{token:a,pos:e,match:i,end:e+a.length,ttype:"regex"}}}},{key:"exact",value:function(t,e){if(e=this.strip_space(e),this.source(e).slice(0,t.length)==t)return{token:t,pos:e,end:e+t.length,ttype:"exact"}}},{key:"expression_list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.expression(t);if(e){for(var i=e.end,a=e.tex,s=[e];!this.eof(i);){var r=this.exact(",",i);if(!r)break;if(a+=" ,",i=r.end,!(e=this.expression(i)))break;a+=" "+e.tex,s.push(e),i=e.end}return{tex:a,pos:t,end:i,exprs:s,ttype:"expression_list"}}}},{key:"expression",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.negative_expression(t);if(e)return e;var i=this.intermediate_or_fraction(t);if(i){if(this.eof(i.end))return i;var a=this.expression(i.end);return a?{tex:i.tex+" "+a.tex,pos:i.pos,end:a.end,ttype:"expression",exprs:[i,a]}:i}var s,r=Object(w.a)(this.non_constant_symbols);try{for(r.s();!(s=r.n()).done;){var n=s.value,c=this.exact(n,t);if(c)return{tex:n,pos:t,end:c.end,ttype:"constant"}}}catch(o){r.e(o)}finally{r.f()}}},{key:"negative_expression",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.exact("-",t);if(e&&!this.other_constant(t)){var i=this.expression(e.end);return i?{tex:"- ".concat(i.tex),pos:t,end:i.end,ttype:"negative_expression",dash:e,expression:i}:{tex:"-",pos:t,end:e.end,ttype:"constant"}}}},{key:"intermediate_or_fraction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.intermediate(t);if(e){var i=this.match(/^\/(?!\/)/,e.end);if(i){var a=this.intermediate(i.end);if(a){var s=this.unbracket(e),r=this.unbracket(a);return{tex:"\\frac{".concat(s.tex,"}{").concat(r.tex,"}"),pos:e.pos,end:a.end,ttype:"fraction",numerator:s,denominator:r}}var n=this.unbracket(e);return{tex:"\\frac{".concat(n.tex,"}{}"),pos:e.pos,end:i.end,ttype:"fraction",numerator:n,denominator:null}}return e}}},{key:"intermediate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.simple(t);if(e){var i=this.subsup(e.end);return i?{tex:"".concat(e.tex).concat(i.tex),pos:t,end:i.end,ttype:"intermediate",expression:e,subsup:i}:e}}},{key:"subsup",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a="",s=i,r=this.exact("_",i);r&&((t=this.unbracket(this.simple(r.end)))?(a="".concat(a,"_{").concat(t.tex,"}"),s=t.end):(a="".concat(a,"_{}"),s=r.end));var n=this.match(/^\^(?!\^)/,s);if(n&&((e=this.unbracket(this.simple(n.end)))?(a="".concat(a,"^{").concat(e.tex,"}"),s=e.end):(a="".concat(a,"^{}"),s=n.end)),r||n)return{tex:a,pos:i,end:s,ttype:"subsup",sub:t,sup:e}}},{key:"simple",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.longest([this.matrix(t),this.bracketed_expression(t),this.binary(t),this.constant(t),this.text(t),this.unary(t),this.negative_simple(t)])}},{key:"negative_simple",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.exact("-",t);if(e&&!this.other_constant(t)){var i=this.simple(e.end);return i?{tex:"- ".concat(i.tex),pos:t,end:i.end,ttype:"negative_simple",dash:e,expr:i}:{tex:"-",pos:t,end:e.end,ttype:"constant"}}}},{key:"matrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.left_bracket(t),i=!1;if(!e){if(!(e=this.leftright_bracket(t,"left")))return;i=!0}var a=this.matrix_contents(e.end,i);if(a){var s=i?this.leftright_bracket(a.end,"right"):this.right_bracket(a.end);if(s){var r=a.rows.map((function(t){return t.tex})).join(" \\\\ "),n=a.is_array?"\\begin{array}{".concat(a.column_desc,"} ").concat(r," \\end{array}"):"\\begin{matrix} ".concat(r," \\end{matrix}");return{tex:"\\left ".concat(e.tex," ").concat(n," \\right ").concat(s.tex),pos:t,end:s.end,ttype:"matrix",rows:a.rows,left:e,right:s}}}}},{key:"matrix_contents",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],a=t,s=void 0,r=void 0,n=!1;!this.eof(a)&&!(e?this.leftright_bracket(a):this.right_bracket(a));){if(i.length){var c=this.exact(",",a);if(!c)return;a=c.end}var o=this.match(/^[(\[]/,a);if(!o)return;var h=[],l=[];for(a=o.end;!this.eof(a);){if(h.length){var u=this.exact(",",a);if(!u)break;a=u.end}var m=this.matrix_cell(a);if(!m)break;"column"==m.ttype?(l.push("|"),n=!0,null!==m.expr&&(l.push("r"),h.push(m.expr))):(l.push("r"),h.push(m)),a=m.end}if(!h.length)return;if(void 0===s)s=h.length;else if(h.length!=s)return;var x=this.match(/^[)\]]/,a);if(!x)return;var p=l.join("");if(void 0===r)r=p;else if(p!=r)return;i.push({ttype:"row",tex:h.map((function(t){return t.tex})).join(" & "),pos:o.end,end:a,cells:h}),a=x.end}if(!(void 0===s||s<=1&&i.length<=1))return{rows:i,end:a,column_desc:r,is_array:n}}},{key:"matrix_cell",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.exact("|",t);if(e){var i=this.expression(e.end);if(!i)return{ttype:"column",expr:null,pos:e.pos,end:e.end};var a=this.exact("|",i.end);if(!a)return{ttype:"column",expr:i,pos:e.pos,end:i.end};var s=this.expression(a.end);if(s)return{tex:"\\left \\lvert ".concat(i.tex," \\right \\rvert ").concat(s.text),pos:e.pos,end:s.end,ttype:"expression",exprs:[i,s]}}return this.expression(t)}},{key:"bracketed_expression",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.left_bracket(t);if(e){var i=this.expression_list(e.end);if(i){var a=this.right_bracket(i.end)||this.leftright_bracket(i.end,"right");return a?{tex:"\\left".concat(e.tex," ").concat(i.tex," \\right ").concat(a.tex),pos:t,end:a.end,bracket:!0,left:e,right:a,middle:i,ttype:"bracket"}:this.eof(i.end)?{tex:"\\left".concat(e.tex," ").concat(i.tex," \\right."),pos:t,end:i.end,ttype:"bracket",left:e,right:null,middle:i}:{tex:"".concat(e.tex," ").concat(i.tex),pos:t,end:i.end,ttype:"expression",exprs:[e,i]}}var s=this.right_bracket(e.end)||this.leftright_bracket(e.end,"right");return s?{tex:"\\left ".concat(e.tex," \\right ").concat(s.tex),pos:t,end:s.end,bracket:!0,left:e,right:s,middle:null,ttype:"bracket"}:{tex:e.tex,pos:t,end:e.end,ttype:"constant"}}if(!this.other_constant(t)){var r=this.leftright_bracket(t,"left");if(r){var n=this.expression_list(r.end);if(n){var c=this.leftright_bracket(n.end,"right")||this.right_bracket(n.end);if(c)return{tex:"\\left ".concat(r.tex," ").concat(n.tex," \\right ").concat(c.tex),pos:t,end:c.end,bracket:!0,left:r,right:c,middle:n,ttype:"bracket"}}}}}},{key:"right_bracket",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Object(w.a)(this.right_brackets);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.exact(a.asciimath,e);if(s)return{tex:a.tex,pos:e,end:s.end,asciimath:a.asciimath,def:a,ttype:"right_bracket"}}}catch(r){i.e(r)}finally{i.f()}}},{key:"left_bracket",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Object(w.a)(this.left_brackets);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.exact(a.asciimath,e);if(s)return{tex:a.tex,pos:e,end:s.end,asciimath:a.asciimath,ttype:"left_bracket"}}}catch(r){i.e(r)}finally{i.f()}}},{key:"leftright_bracket",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,a=Object(w.a)(this.leftright_brackets);try{for(a.s();!(t=a.n()).done;){var s=t.value,r=this.exact(s.asciimath,e);if(r)return{tex:"left"==i?s.left_tex:"right"==i?s.right_tex:s.free_tex,pos:e,end:r.end,ttype:"leftright_bracket"}}}catch(n){a.e(n)}finally{a.f()}}},{key:"text",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.match(/^"([^"]*)"/,t);if(e){var i=this.escape_text(e.match[1]);return{tex:"\\text{".concat(i,"}"),pos:t,end:e.end,ttype:"text",text:i}}var a=this.match(/^(?:mbox|text)\s*(\([^)]*\)?|\{[^}]*\}?|\[[^\]]*\]?)/,t);if(a){var s=this.escape_text(a.match[1].slice(1,a.match[1].length-1));return{tex:"\\text{".concat(s,"}"),pos:t,end:a.end,ttype:"text",text:s}}}},{key:"binary",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Object(w.a)(this.binary_symbols);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.exact(a.asciimath,e),r=a.option?["[","]"]:["{","}"],n=Object(c.a)(r,2),o=n[0],h=n[1];if(s){var l=this.unbracket(this.simple(s.end));if(l){var u=a.rawfirst?l.middle_asciimath:l.tex,m=this.unbracket(this.simple(l.end));return m?{tex:"".concat(a.tex).concat(o).concat(u).concat(h,"{").concat(m.tex,"}"),pos:e,end:m.end,ttype:"binary",op:a,arg1:l,arg2:m}:{tex:"".concat(a.tex).concat(o).concat(u).concat(h,"{}"),pos:e,end:l.end,ttype:"binary",op:a,arg1:l,arg2:null}}return{tex:"".concat(a.tex).concat(o).concat(h,"{}"),pos:e,end:s.end,ttype:"binary",op:a,arg1:null,arg2:null}}}}catch(x){i.e(x)}finally{i.f()}}},{key:"unary",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Object(w.a)(this.unary_symbols);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.exact(a.asciimath,e);if(s){var r=this.subsup(s.end),n=r?r.tex:"",o=r?r.end:s.end,h=this.simple(o),l=a.func?h:this.unbracket(h),u=l&&(a.raw?l.middle_asciimath:l.tex);if(a.rewriteleftright){var m=Object(c.a)(a.rewriteleftright,2),x=m[0],p=m[1];return l?{tex:"\\left ".concat(x," ").concat(u," \\right ").concat(p," ").concat(n),pos:e,end:l.end,ttype:"unary",op:s,subsup:r,arg:l}:{tex:"\\left ".concat(x," \\right ").concat(p," ").concat(n),pos:e,end:s.end,ttype:"unary",op:s,subsup:r,arg:null}}return l?{tex:"".concat(a.tex).concat(n,"{").concat(u,"}"),pos:e,end:l.end,ttype:"unary",op:s,subsup:r,arg:l}:{tex:"".concat(a.tex).concat(n,"{}"),pos:e,end:s.end,ttype:"unary",op:s,subsup:r,arg:null}}}}catch(d){i.e(d)}finally{i.f()}}},{key:"constant",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.right_bracket(t))return this.longest([this.other_constant(t),this.greek(t),this.name(t),this.number(t),this.arbitrary_constant(t)])}},{key:"name",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.literal(this.match(/^[A-Za-z]/,t))}},{key:"greek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new RegExp("^("+this.greek_letters.join("|")+")"),i=this.match(e,t);if(i)return{tex:"\\"+i.token,pos:t,end:i.end,ttype:"greek"}}},{key:"number",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new RegExp("^\\d+("+this.decimalsign+"\\d+)?");return this.literal(this.match(e,t))}},{key:"other_constant",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Object(w.a)(this.constants);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.exact(a.asciimath,e);if(s)return{tex:"".concat(a.tex),pos:s.pos,end:s.end,ttype:"other_constant"}}}catch(h){i.e(h)}finally{i.f()}var r,n=Object(w.a)(this.relations);try{for(n.s();!(r=n.n()).done;){var c=r.value;if(!c.asciimath.match(/^!/)){var o=this.exact("!"+c.asciimath,e);if(o)return{tex:"\\not ".concat(c.tex),pos:o.pos,end:o.end,ttype:"other_constant"}}}}catch(h){n.e(h)}finally{n.f()}}},{key:"arbitrary_constant",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.eof(t)){if(this.exact(",",t))return;var e,i=Object(w.a)(this.non_constant_symbols.concat(this.left_brackets.map((function(t){return t.asciimath})),this.right_brackets.map((function(t){return t.asciimath})),this.leftright_brackets.map((function(t){return t.asciimath}))));try{for(i.s();!(e=i.n()).done;){var a=e.value;if(this.exact(a,t))return}}catch(n){i.e(n)}finally{i.f()}var s=this.strip_space(t),r=this.source(s).slice(0,1);return{tex:r,pos:t,end:s+1,ttype:"arbitrary_constant"}}}}]),t}(),M=i(162),C=i.n(M);!function(t){t[t.NUMBER=0]="NUMBER",t[t.IDENTIFIER=1]="IDENTIFIER",t[t.OPERATOR=2]="OPERATOR"}(y||(y={}));var R=function(){function t(e){Object(o.a)(this,t),this.parser=void 0,this.parser=e}return Object(k.a)(t,[{key:"visit",value:function(t){if(this.parser.functionName||this.parser.functionArg)return this.parser.abort("duplicate function definition"),null;if(t.ttype.startsWith("expression")&&t.exprs&&1===t.exprs.length)return this.visit(t.exprs[0]);if(!t.exprs||t.exprs.length<2)return this.parser.abort("empty equation"),null;if("unary"===t.exprs[0].ttype){var e=t.exprs[0],i=t.exprs[1];if(e.arg&&"bracket"===e.arg.ttype&&i.exprs&&2===i.exprs.length&&"="===i.exprs[0].tex)return this.parser.functionArg=e.arg.middle.tex,this.parser.functionName=e.op.token,i.exprs[1]}else if("expression"===t.ttype&&t.exprs&&2===t.exprs.length){var a=t.exprs[0],s=t.exprs[1];if("literal"!==a.ttype&&"greek"!==a.ttype)return this.parser.abort("illegal function name"),null;if(s.exprs&&2===s.exprs.length){var r=s.exprs[0],n=s.exprs[1];if("bracket"===r.ttype&&n.exprs&&2===n.exprs.length&&"="===n.exprs[0].tex)return this.parser.functionName=a.tex,this.parser.functionArg=r.middle.tex,n.exprs[1]}}return this.parser.abort("unable to find function declaration"),null}}]),t}(),E=function(){function t(e,i){Object(o.a)(this,t),this.parser=void 0,this.parent=void 0,this.amParser=new N,this.parser=e,this.parent=i}return Object(k.a)(t,[{key:"visit",value:function(t){if(t.ttype.startsWith("expression")&&t.exprs){if(1===t.exprs.length)return void this.visit(t.exprs[0]);if(2===t.exprs.length&&"arbitrary_constant"===t.exprs[0].ttype)return this.visit(t.exprs[1]),void this.visitObject({type:y.OPERATOR,value:this.morphemeFromSymbol(t.exprs[0].tex)})}if(t.dash)return this.visit(t.expression),this.visitLiteral("-1"),void this.visitObject({type:y.OPERATOR,value:Module._jit_morpheme_mul,params:2});if("fraction"!==t.ttype)if("literal"!==t.ttype&&"greek"!==t.ttype||t.exprs&&0!==t.exprs.length)if("intermediate"!==t.ttype){if("bracket"===t.ttype){var e=t;return e.left&&e.right&&e.middle?"("===e.left.tex&&")"===e.right.tex?void this.visit(e.middle):void this.parser.abort("unrecognized bracket type"):void this.parser.abort("incomplete bracket expression")}t.exprs&&2===t.exprs.length?this.visitBranch(t):"unary"!==t.ttype||this.visitUnaryOperation(t)}else{var i=t;this.visitSubsup(i)}else this.visitLiteral(t.tex);else{var a=t;a.numerator&&a.denominator&&(this.visitFractionPart(a.numerator),this.visitFractionPart(a.denominator),this.visitObject({type:y.OPERATOR,value:Module._jit_morpheme_div,params:2}))}}},{key:"visitBranch",value:function(t){if(!t.exprs||t.exprs.length<2)this.parser.abort("not a branch expression");else{var e=t.exprs[0],i=t.exprs[1];if("literal"===e.ttype||"intermediate"===e.ttype||"bracket"===e.ttype||"fraction"===e.ttype||"greek"===e.ttype){if("expression"===i.ttype){if(i.exprs[1].tex.startsWith("+")||i.exprs[1].tex.startsWith("-"))return this.visitBinaryOperation(e,Module._jit_morpheme_mul,i.exprs[0]),void this.visit(i.exprs[1])}else if("negative_expression"===i.ttype)return void this.visitBinaryOperation(e,Module._jit_morpheme_sub,i.expression);return"literal"!==e.ttype&&"greek"!==e.ttype||"i"!==i.tex?i.exprs&&2===i.exprs.length&&"arbitrary_constant"===i.exprs[0].ttype?void this.visitBinaryOperation(e,this.morphemeFromSymbol(i.exprs[0].tex),i.exprs[1]):void this.visitBinaryOperation(e,Module._jit_morpheme_mul,i):void(isNaN(parseFloat(e.tex))?(this.visitObject({type:y.IDENTIFIER,value:e.tex}),this.visitLiteral("i"),this.visitObject({type:y.OPERATOR,value:Module._jit_morpheme_mul,params:2})):(this.visitLiteral(e.tex),this.visitLiteral("i"),this.visitObject({type:y.OPERATOR,value:Module._jit_morpheme_mul,params:2})))}}}},{key:"morphemeFromSymbol",value:function(t){switch(t){case"+":return Module._jit_morpheme_add;case"-":return Module._jit_morpheme_sub;case"\\cdot":return Module._jit_morpheme_mul;case"/":return Module._jit_morpheme_div;case"sin":return Module._jit_morpheme_sin;case"cos":return Module._jit_morpheme_cos;case"tan":return Module._jit_morpheme_tan;case"sinh":return Module._jit_morpheme_sinh;case"cosh":return Module._jit_morpheme_cosh;case"tanh":return Module._jit_morpheme_tanh;default:return this.parser.abort("unrecognized operator "+t),0}}},{key:"visitBinaryOperation",value:function(t,e,i){this.visit(t),this.visit(i),this.visitObject({type:y.OPERATOR,value:e,params:2})}},{key:"visitUnaryOperation",value:function(t){t.arg&&t.op?(this.visit(t.arg),this.visitObject({type:y.OPERATOR,value:this.morphemeFromSymbol(t.op.token),params:1})):this.parser.abort("not a unary operation")}},{key:"visitLiteral",value:function(t){isNaN(parseFloat(t))?this.visitObject({type:y.IDENTIFIER,value:t}):this.visitObject({type:y.NUMBER,value:t})}},{key:"visitSubsup",value:function(t){if(t.subsup){if(t.subsup.sup){this.visit(t.expression);var e=t.subsup.sup.tex.replace("{","").replace("}","");this.amParser.input(e);var i=this.amParser.consume();if(!(i&&i.exprs&&i.exprs[0]))return void this.parser.abort("incomplete superscript");this.visit(i.exprs[0]),this.visitObject({type:y.OPERATOR,value:Module._jit_morpheme_exp})}else if(t.subsup.sub)return"literal"===t.expression.ttype?void this.visitLiteral(t.expression.tex+"_"+t.subsup.sub.tex):void this.parser.abort("illegal subscript")}else this.parser.abort("not a subscript/superscript expression")}},{key:"visitFractionPart",value:function(t){if(t.ttype&&"literal"===t.ttype)this.visit(t);else{this.amParser.input(t.tex);var e=this.amParser.consume();if(!(e&&e.exprs&&e.exprs[0]))return void this.parser.abort("incomplete fraction");this.visit(e.exprs[0])}}},{key:"visitObject",value:function(t){this.parser.stack.push(t)}}]),t}(),F=function(){function t(){Object(o.a)(this,t),this.functionName=void 0,this.functionArg=void 0,this.stack=[],this.error=void 0,this.type=a.R2C}return Object(k.a)(t,[{key:"visit",value:function(t){var e=new R(this).visit(t),i=new E(this,this);e&&i.visit(e)}},{key:"abort",value:function(t){this.stack=[],this.error=t}},{key:"generateFunctionName",value:function(){var t=this.type+"_"+this.functionName+"_"+this.functionArg+this.stack.map((function(t){return t.type+":"+t.value})).join("_");return"__jit_"+C()(t).toString().substr(0,16)}}]),t}(),A=i(358),S=i(31),q=(i(324),i(325),i(326),i(1)),I=(i(327),function(t){var e=j(t.pfId),i=Object(c.a)(e,2),a=i[0],s=(i[1],Object(h.useMemo)((function(){if(a.jitFunction){var t=Module.ccall("BinaryenModuleRead","number",["number","number"],[a.jitFunction.getModule(),a.jitFunction.getModuleLen()]),e=ccall("BinaryenModuleAllocateAndWriteText","number",["number"],[t]),i=UTF8ToString(e);return Module._free(e),ccall("BinaryenModuleDispose",null,["number"],[t]),i}return"module is not compiled!"}),[a.jitFunction]));return Object(u.jsx)(A.b,{className:"bp3-dark info-dialog",title:"".concat(a.id,": ").concat(a.name,"(").concat(a.parameterName,")"),isOpen:t.isOpen,onClose:t.closeCallback,children:Object(u.jsx)(A.d,{id:"InfoTabs",className:q.a.DIALOG_BODY,vertical:!0,children:Object(u.jsx)(A.c,{id:"disassembly",title:"Disassembly",panel:Object(u.jsx)("div",{className:q.a.CODE_BLOCK,children:Object(u.jsx)("pre",{children:s})})})})})}),L=i(160),T=Object(u.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:[Object(u.jsx)("desc",{children:"new-point"}),Object(u.jsx)("circle",{cx:"50%",cy:"50%",r:6,fill:L.a.GREEN5})]}),P=Object(u.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:[Object(u.jsx)("desc",{children:"new-arc"}),Object(u.jsx)("path",{d:"M0,8 Q4,0 8,8 12,16 16,8",stroke:L.a.GREEN5,fill:"none",strokeWidth:2})]}),B={},U=function(t){var e=j(t.n,t.type),i=Object(c.a)(e,2),a=i[0],s=i[1],r=Object(h.useRef)(null),n=Object(h.useRef)(null),o=Object(h.useState)(!1),l=Object(c.a)(o,2),m=(l[0],l[1],Object(h.useState)(!1)),x=Object(c.a)(m,2),p=x[0],d=x[1];return Object(h.useEffect)((function(){if(r.current&&n.current){t.parser.input(r.current.value);var e=t.parser.consume();if(_.a.render(e.tex,n.current,{throwOnError:!1,displayMode:!0}),e.exprs[0]){var i=new F;i.visit(e.exprs[0]),s({name:i.functionName,parameterName:i.functionArg,text:r.current.value,stack:i.stack,functionName:i.generateFunctionName()}),i.error?console.error(i.error):console.log(i.stack)}}}),[a.text,t.parser]),Object(h.useEffect)((function(){if(a.drawing&&(!a.jitFunction||a.jitFunction.getName()!==a.functionName)){if(B[a.functionName])s({jitFunction:B[a.functionName]});else{var e=new Module.FunctionMetafactory(a.name,a.parameterName,a.id,a.functionName);e.visitStack(a.stack);var i=e.visitEnd();i.install(),console.log("js: "+i.getHandle()),B[a.functionName]=i.clone(),s({jitFunction:i}),e.delete()}t.drawCallback(t.n,!1),s({drawing:!1})}}),[a.drawing]),Object(u.jsxs)("div",{className:"function-entry-container",children:[Object(u.jsxs)("div",{className:"function-control-panel",children:[Object(u.jsx)("button",{className:"function-color-button",style:{backgroundColor:a.style.stroke},onClick:function(t){var e="hsla(".concat(360*Math.random(),", 80%, 60%, 1)");s({style:{stroke:e}})}}),Object(u.jsx)(A.a,{id:"draw -function",minimal:!0,icon:"play",disabled:!a.stack||0===a.stack.length,loading:a.drawing,onClick:function(t){s({drawing:!0})},intent:a.jitFunction?a.jitFunction.getName()===a.functionName?S.a.NONE:S.a.WARNING:S.a.NONE}),Object(u.jsx)(A.a,{minimal:!0,icon:"cog",disabled:!a.jitFunction,onClick:function(t){return d(!0)}})]}),Object(u.jsx)("input",{ref:r,className:"function-input-line",onInput:function(t){return s({text:t.target.value})}}),Object(u.jsx)("div",{ref:n,className:"function-pretty"}),Object(u.jsx)("div",{className:"function-delete-button-container",children:Object(u.jsx)(A.a,{minimal:!0,small:!0,icon:"small-cross",intent:S.a.DANGER,onClick:function(){t.drawCallback(a.id,!0),a.jitFunction&&(a.jitFunction.cleanup(),a.jitFunction.delete()),t.removeCallback()}})}),Object(u.jsx)(I,{isOpen:p,closeCallback:function(){return d(!1)},pfId:t.n})]})},D=function(t){return Object(u.jsxs)("div",{className:"new-function-button-container",children:[Object(u.jsx)(A.a,{id:"new-point",minimal:!0,icon:T,intent:S.a.SUCCESS,large:!0,onClick:function(){return t.addFunction(a.C)},disabled:!0}),Object(u.jsx)(A.a,{id:"new-arc",minimal:!0,icon:P,intent:S.a.SUCCESS,large:!0,onClick:function(){return t.addFunction(a.R2C)}}),Object(u.jsx)(A.a,{id:"new-fxn",minimal:!0,intent:S.a.SUCCESS,large:!0,onClick:function(){return t.addFunction(a.C2C)},children:Object(u.jsx)("b",{children:"\u2102"})})]})},z=(i(352),function(t){var e=new N,i=Object(h.useState)(0),a=Object(c.a)(i,2),s=a[0],r=a[1],o=Object(h.useState)(new Map),l=Object(c.a)(o,2),m=l[0],x=l[1];return Object(u.jsxs)("div",{className:"left-sidebar",children:[Object(u.jsx)("p",{children:"there will be something here eventually i promise"}),m.size>0?Object(n.a)(m).map((function(i){return Object(u.jsx)(U,{n:i[0],removeCallback:function(){x((function(t){var e=new Map(t);return e.delete(i[0]),e}))},parser:e,drawCallback:t.drawCallback,type:i[1]},i[0])})):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)(D,{addFunction:function(t){x((function(e){var i=new Map(e);return i.set(s,t),i})),r((function(t){return t+1}))}})]})});i(353),i(354);function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){return Object(f.a)(Object(f.a)(Object(f.a)({signalName:t},i),e),{},{_dataType:function(t){}})}}W("Ready");var G=W("ArcFocus"),H=(W("TreeRecalculate"),function(t){var e=j(t.pfId),i=Object(c.a)(e,2),s=i[0],r=i[1];switch(s.type){case a.C:return Object(u.jsx)(u.Fragment,{});case a.R2C:return Object(u.jsx)(Q,Object(f.a)(Object(f.a)({},t),{},{pf:s,updatePf:r}));case a.C2C:return Object(u.jsx)(Z,Object(f.a)(Object(f.a)({},t),{},{pf:s,updatePf:r}))}}),Q=function(t){var e=Object(h.useMemo)((function(){return new Module.RealMultipoint(t.pf.jitFunction,t.limits[0],t.limits[2],t.res)}),[t.pf.jitFunction]),i=Object(h.useContext)(p),a=Object(c.a)(i,2),s=(a[0],a[1]),r=Object(h.useMemo)((function(){if(e){console.debug("evaluating multipoint"),e.fullEval();var t=e.getValues(),i=Object(c.a)(t,2);return function(t,e){return Module.HEAPF64.subarray(t/8,t/8+e)}(i[0],i[1])}}),[e]);return Object(u.jsx)("polyline",{id:"plot-arc-".concat(t.pfId),className:"plot-arc",fill:"none",style:t.pf.style,points:null===r||void 0===r?void 0:r.join(","),onMouseOver:function(){s(G({arc:t.pfId}))},onMouseOut:function(){return s(G({arc:-1}))}})},Z=function(t){var e=Object(h.useMemo)((function(){return new Module.ComplexMultipoint(t.pf.jitFunction,[t.limits[0],t.limits[1]],[t.limits[2],t.limits[3]],t.res)}),[t.pf.jitFunction]),i=Object(h.useMemo)((function(){if(e){console.debug("evaluating multipoint"),e.fullEval(),e.getValues();var t=e.getColors();return console.log(t),t}}),[e]),a=Object(h.useMemo)((function(){if(i){var e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return void console.error("could not get canvas context");var s=(t.limits[2]-t.limits[0])*t.res,r=(t.limits[3]-t.limits[1])*t.res;e.width=s,e.height=r,console.debug("plot: "+s+"x"+r);var n=i.getBuffer(),o=Object(c.a)(n,2),h=o[0],l=o[1],u=new Uint8ClampedArray(Module.HEAPU8.buffer,h,l);console.debug(u);var m=new ImageData(u,s);return a.putImageData(m,0,0),e.toDataURL("image/png")}}),[i]);return Object(u.jsx)("image",{id:"color-plot-".concat(t.pf.id),className:"color-plot",width:t.limits[2]-t.limits[1],height:t.limits[3]-t.limits[1],href:a,x:t.limits[0],y:t.limits[1],preserveAspectRatio:"xMidYMid meet"})},J=function(t){var e=Object(h.useRef)(null),i=Object(h.useState)(0),a=Object(c.a)(i,2),s=(a[0],a[1]),r=Object(h.useState)([0,0]),n=Object(c.a)(r,2),o=(n[0],n[1]),l=Object(h.useState)([0,0]),m=Object(c.a)(l,2),x=(m[0],m[1]);return Object(h.useEffect)((function(){if(e.current){var i=[e.current.offsetWidth/2,e.current.offsetHeight/2],a=Math.min(e.current.offsetWidth/(t.limits[1]-t.limits[0]),e.current.offsetHeight/(t.limits[3]-t.limits[2]));x([Math.ceil(e.current.offsetWidth/a),Math.ceil(e.current.offsetHeight/a)]);var r=[i[0],i[1]];s(a),o(r)}}),[t]),Object(u.jsx)("div",{ref:e,className:"plot-grid-container",children:Object(u.jsx)("svg",{className:"plot-space",width:"100%",height:"100%",viewBox:"".concat(t.limits[0]," ").concat(t.limits[1]," ").concat(t.limits[2]-t.limits[0]," ").concat(t.limits[3]-t.limits[1]),preserveAspectRatio:"xMidYMid slice",children:Object(u.jsxs)("g",{className:"coordinate-y-flip",children:[Object(u.jsx)(Y,{limits:t.limits,majorInterval:t.majorTicks,minorTicksPerMajor:t.minorTicks,hideMinorGrid:!1}),t.drawList.map((function(e){return Object(u.jsx)(H,{pfId:e,limits:[t.limits[0],t.limits[1],t.limits[2],t.limits[3]],res:50},e)}))]})})})},Y=function(t){var e=t.majorInterval/t.minorTicksPerMajor;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("defs",{children:[Object(u.jsx)("pattern",{id:"grid-lines-minor",width:e,height:e,patternUnits:"userSpaceOnUse",children:Object(u.jsx)("path",{className:"plot-grid-minor-line",d:"M ".concat(e," 0 L 0 0 0 ").concat(e)})}),Object(u.jsxs)("pattern",{id:"grid-lines-major",width:t.majorInterval,height:t.majorInterval,patternUnits:"userSpaceOnUse",children:[t.hideMinorGrid?Object(u.jsx)(u.Fragment,{}):Object(u.jsx)("rect",{width:t.majorInterval,height:t.majorInterval,fill:"url(#grid-lines-minor)"}),Object(u.jsx)("path",{className:"plot-grid-major-line",d:"M ".concat(t.majorInterval," 0 L 0 0 0 ").concat(t.majorInterval)})]})]}),Object(u.jsx)("rect",{x:t.limits[0],y:t.limits[1],width:"100%",height:"100%",fill:"url(#grid-lines-major)"}),Object(u.jsx)("line",{className:"plot-grid-axis-line",x1:t.limits[0],y1:"0",x2:t.limits[2],y2:"0"}),Object(u.jsx)("line",{className:"plot-grid-axis-line",x1:"0",y1:t.limits[1],x2:"0",y2:t.limits[3]}),Object(n.a)(Array(Math.ceil(t.limits[2]/t.majorInterval)).keys()).map((function(t){return t+1})).map((function(t){return Object(u.jsx)("text",{className:"plot-grid-major-label",x:t,y:"0",fontSize:"0.1",children:t},t+",0")})),Object(n.a)(Array(Math.ceil(Math.abs(t.limits[0]/t.majorInterval))).keys()).map((function(t){return t+1})).map((function(t){return Object(u.jsxs)("text",{className:"plot-grid-major-label",x:-t,y:"0",fontSize:"0.1",children:["-",t]},"-"+t+",0")})),Object(n.a)(Array(Math.ceil(t.limits[3]/t.majorInterval)).keys()).map((function(t){return t+1})).map((function(t){return Object(u.jsxs)("text",{className:"plot-grid-major-label",x:"0",y:t,fontSize:"0.1",children:["-",t,"i"]},"0,"+t)})),Object(n.a)(Array(Math.ceil(Math.abs(t.limits[1]/t.majorInterval))).keys()).map((function(t){return t+1})).map((function(t){return Object(u.jsxs)("text",{className:"plot-grid-major-label",x:"0",y:-t,fontSize:"0.1",children:[t,"i"]},"0,-"+t)}))]})},V=function(t){var e=Object(h.useState)([]),i=Object(c.a)(e,2),a=i[0],s=i[1],r=Object(h.useCallback)((function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?s(a.filter((function(e){return e!==t}))):a.includes(t)||s([].concat(Object(n.a)(a),[t]))}),[a,s]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(d,{children:Object(u.jsxs)(g,{children:[Object(u.jsx)(z,{drawCallback:r}),Object(u.jsx)(J,{majorTicks:1,minorTicks:5,limits:[-4,-4,4,4],drawList:a})]})})})};window.addEventListener("nativeInit",(function(){r.a.render(Object(u.jsx)(V,{}),document.querySelector(".glam-app-container"))}))}},[[355,1,2]]]);
//# sourceMappingURL=main.fce66866.chunk.js.map